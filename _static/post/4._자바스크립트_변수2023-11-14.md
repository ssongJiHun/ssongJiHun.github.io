---
template : "post"
title : "4. 자바스크립트 변수"
category : ""
tags : "DeepDive"
created: "2023-11-14"
---

“모던 자바 스크립트 Deep Dive “ 학습 내용을 정리한 글입니다.


---


## 변수가 무엇이고 왜 필요한가?


컴퓨터의 CPU는 연산을 담당하고, **메모리는** **데이터를 저장**하는 역을 한다.


**메모리**는 데이터를 저장할 수 있는 **데이터 셀의 집합체**이다. 
메모리 셀의 크기는 1바이트(8비트)이다. 즉 메모리 셀 크기 1바이트 단위로 데이터를 저장하거나 읽어 들인다.


각 셀은 고유의 메모리 주소를 가지고 있으며,   주소는 00x00000000부터 메모리 크기까지 가진다.
CPU가 연산한 결과 값은 **2진법으로** 메모리상의 임의 위치에 저장한다.



이렇게 저장된 메모리 주소에 저장된 값에 접근하여 재사용할 수 있다. 
개발자가 직접 접근하는 방법은 매우 위험한 방법이고 불가능하다. 같은 환경과 같은 코드임에도 **코드가 실행될 때마다 값이 저장될 메모리 주소는 변경되기 때문이다.**
이를 식별하기 위해 사용하는 것이 **“변수”** 이다.


변수는 **값의 위치를 가키는 상징적인 이름**이고, 컴파일러 또는 인터프리터에 의해 **메모리 공간의 주소로 치환**되어 실행된다.

- **변수 이름(변수명)**은 메모리 주소를 기억하고 있고 `식별자`라고 불린다.
- **변수 값**은 해당 메모리 주소에 저장된 값을 의미한다.
- **할당**은 변수에 값을 저장하는 것이고,  **참조**는 변수의 값을 읽어드리는 것을 의미한다.

> **식별자**  
> 어떤 값을 구별해서 식별할 수 있는 고유한 이름이다.  
> **식별자**는 값이 아니라 **메모리 주소를 기억**하고 있다.  
> 변수, 함수, 클래스 등이 식별자이다.


## 변수 선언은 식별자의 존재를 알리는 것


변수 선언은 변수를 생성하는 것이고, **저장할 메모리 공간을 확보**하는 것이다.
확보된 **메모리 공간의** **주소를 연결**하는 단계이다.
자바스크립트는 변수 선언을 하기 위해서는 **키워드**가 필요하며, `var` `let` `const` 가 존재한다.


변수를 선언하게 되면 자바스크립트는 2단계에 거쳐 동작한다.

	- **선언 단계** : 변수의 이름과 존재를 자바스크립트 알린다.
	- **초기화 단계** : 메모리 공간을 확보하고, 암묵적으로 undefined를 할당해 초기화한다.

**undefined** 값이 암묵적으로 할당되어 초기화 되는 것은 자바스크립트의 독특한 특징인데 아래와 같은 이유로부터 안전해지기 위해서이다. 
만약 초기화 단계를 거치지 않으면 이전에 다른 애플리케이션이 사용했던 값이 남아 있을 수 있는데 이러한 값을 쓰레기 값이라 한다. 


> **변수 이름도 데이터인데 어디에 등록되는가?**  
> 모든 식별자는 실행 컨텍스트에 등록한다.   
> 간단히 실행 컨텍스트는 소스코드를 평가하고 실행하기 위해 필요한 환경을 제공하고,  
> 코드의 실행 결과를 실제로 관리하는 영역이다.  
>   
> 변수명과 변수값은 실행 컨텍스트내에 key/value 형식인 객체로 등록되어 관리한다.


**ReferenceError(참조 에러)**는 식별자를 찾을 수 없을 때 발생하는 오류이다.


## 변수 선언의 실행 시점과 호이스팅


변수 선언의 실행 시점은 인터프리터가 한 줄씩 순차적으로 실행되는 런타임 시점이 아니라, 그 **이전 단계인 “소스코드의 평가 과정”**에서 **변수 선언**을 하여 식별자의 존재를 알리고 메모리 공간을 확보하고 undefined로 할당해 초기화한다.


이렇게 런타임 이전 단계에서 선언을 실행된다는 것은 **변수가 위로 끌어 올려진 것처럼** 동작하는데 이를 `호이스팅` 이라고 부른다.


> **정리하면 다음과 같이 동작한다.**  
> 1. 평과 과정 : 선언문을 찾아 존재를 알림 - 메모리 공간을 확보 - 초기화 할당한다.  
> 2. 런타임 -  한 줄씩 해석(연산과 할당), 이 과정에서 선언문은 무시)


## 변수 값의 할당


변수에 값을 할당은 대입(=)연산자를 사용하고 **단 하나의 값**을 저장한다.
변수 선언의 실행 시점을 이해했다면 다음 예시는 동일하다.


```javascript
console.log(score); // 평과 과정에서 선언이 실행되어 undefined로 초기화되어있다.

var score; // 1. 변수 선언 ( 평가 과정 )
score = 10; // 2. 변수 할당 ( 런타임 )

console.log(score); // 런타임 과정에서 10을 대입.

// 하나의 문으로 단축 표현할 수 있다. 동작 시점은 위와 동일하다.
var score = 10;  // 평가 과정에서는 var score = undefined, 런타임에서는 score = 10 대입
```


### 변수 값의 재할당


재할당이란 이미 할당 변수의 값에 **새로운 값을 할당**하는 것을 말한다.
재할당을 할 수 없어서 저장된 값을 변경할 수 없다면 변수가 아니라 **상수**이다.



**재할당**을 하게 되면 **새로운 메모리 공간을 확보**하고 그곳에 새로운 값을 저장한다.
재할당되면서 버려지는 이전의 메모리 공간은 아무도 사용하고 있지 않는 걸 판단하고 가비지 렉터에 의해 자동 해제된다.


> 사실 변수는 선언과 동시에 undefined 값으로 초기화되기 때문에 엄밀히 말하자면 이 과정도 재할당에 속한다.


## 식별자 네이밍 컨벤션


식별자는 다음과 같은 규칙을 준수해야 한다.

- 식별자는 특수문자를 제외한 **문자, 숫자, 언어스코어(_), 달러 기호($)**를 사용할 수 있다.
- 위와 같은 규칙에서 숫자로 시작하는 것은 허용되지 않는다.
- 예약어는 식별자로 사용할 수 없다.

> **예약어**  
> 프로그래밍 언어에서 사용되고 있거나, 사용 될 예정인 단어를 말한다.


일관성을 유지하기 위한다면 자바스크립트는 다음과 같은 네이밍 컨벤션을  일반적으로 사용한다.

- **변수, 함수** : 카멜케이스
- **생성자함수, 클래스 이름** : 파스칼 케이

변수의 개념은 사실 다른 언어에도 학습했던 내용이지만 책의 내용을 자세하게 작성한 이유는 자바스크립트의 독특한 특성 때문이고, 동작 방식과 원리는 이해해야 추후 정리하고 함수형 프로그래밍 패러다임을 학습하기 위해서는 필수적이라고 생각한다.

